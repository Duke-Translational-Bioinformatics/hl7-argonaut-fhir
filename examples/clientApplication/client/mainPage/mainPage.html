<template name="mainPage">
  <div id="mainPage" class="padded page">
    {{> loginButtons}}
    <br><br>

    {{#if getUserAccessToken }}
        <hr />

        <h2>Test the results</h2>
        <div class="section">
            <p>
                Good news! Your user was authenticated with OAuth2. While the authentication is indication that data
                is being transferred from the resource service using tokens. You can view the results here.
            </p>

            <h2>Step A6</h2>
            <label for="">AccessToken</label><br>
            <p>{{ getUserAccessToken }}</p>

            <button class="testLocalTokens oauth-button">Test Local Tokens</button>

            {{#if getUserIdResult}}
                <h3>Step A7 - fetch userId from /api/getUserId</h3>
                <!-- <p>
                    This step is also performed server-to-server by the client application and is
                    only done here for testing purposes. Here we are using the newly acquired
                    access token, we retrieve the userId associated with the access token. These two
                    should match.
                </p>

                <label for="">expected id - given to us by the oauth2 service during login</label><br>
                {{ getUserOAuth2Id }}<br><br> -->

                <label for="">User ID</label><br>
                {{ getUserIdResult }}


                <h3>Step A8 - fetch data from /api/getUserData/:id</h3>
                <p>
                    This step uses the access token to query the patient record.
                </p>
                <textarea class="jsonData">
                  {{getUserData}}
                </textarea>
            {{/if}}
        </div>
    {{/if}}

    <hr />
    <h2>Utilities</h2>
    <div class="section">
        <p>
            For the sake of convenience while you experiment, you can reset configuration for the ClientApplication.
            This will make the login button you see above goto it's unconfigured state.
        </p>
        <button id="resetServiceConfiguration" class="oauth-button">Reset service configuration</button>
    </div>
  </div>
</template>
